digraph models {
  // general settings
  graph [rankdir=LR]; // draw graph from left to right
  node [shape=record, fontsize=12, width=3.0]; // fixed font size
  edge [arrowhead=crow, fontsize=12]; // ER diagram

  // nodes
  admin_users [label="admin_users(管理者)|{{id|login_name(ログイン名)|password_digest|created_at|updated_at}|{Int|String|String|Datetime|Datetime}}"];

  users [label="users(ユーザ)|{{id|login_name(ログイン名)|password_digest|created_at|updated_at}|{Int|String|String|Datetime|Datetime}}"];

  bridges [label="bridges(橋)|{{id|location(座標)|title(名称)|address(住所)|other_data(その他の内容)|created_at|updated_at}|{Int|Geometry(Point)|String|String|Jsonb|Datetime|Datetime}}"];

  bridge_main_contents [label="bridge_main_contents(橋のメインコンテンツ)|{{id|bridge_id|data(画像/動画)|start_pos(開始位置)|end_pos(終了位置)|created_at|updated_at}|{Int|Int|ActiveStorage|Enum.ExcelPosition/Nullable|Enum.ExcelPosition/Nullable|Datetime|Datetime}}"];

  bridge_contents [label="bridge_contents(橋のコンテンツ)|{{id|bridge_id|title(名前)|data(画像/動画)|metadata(データの内部構造)|created_at|updated_at}|{Int|Int|String|ActiveStroage|Jsonb|Datetime|Datetime}}"]

  bridge_contents_inspections [label="bridge_contents_inspections(中間テーブル)|{{id|bridge_content_id|inspection_id|data(コンテンツ)|created_at|updated_at}|{Int|Int|Int|Jsonb|Datetime|Datetime}}"]

  inspections [label="inspections(点検)|{{id|bridge_id|geom(地理情報)|geom3d(地理情報3D)|category(橋脚の種類)|report_data(報告内容)|date(点検日)|created_at|updated_at}|{Int|Int|Geometry(任意)|Geometry(任意)|Enum.BridgeCategory|Jsonb|Datetime|Datetime|Datetime}}"];

  maintenances [label="maintenances(補修)|{{id|inspection_id|report_data(報告内容)|date(補修日)|created_at|updated_at}|{Int|Int|jsonb|Datetime|Datetime|Datetime}}"]

  maintenance_contents [label="maintenances(補修コンテンツ)|{{id|maintenance_id|data(画像/動画)|created_at|updated_at}|{Int|Int|ActiveStorage|Datetime|Datetime}}"]

  soundnesses [label="soundnesses(健全度)|{{id|bridge_id|evaluation_at(評価日)|evaluation(評価)|evaluation_data(各評価)|created_at|updated_at}|{Int|Int|Datetime|String|Jsonb|Datetime|Datetime}}"]

  // enum
  enum_position [label="Enum.ExcelPosition(Excelの開始/終了位置)|{{Top|Bottom|Left|Right}}"];
  enum_bridge_category [label="Enum.BridgeCategory(橋脚の種類)|{{1(上部構造主桁)|2(上部構造横桁)|3(上部構造床版)|4(下部構造)|5(支承部)|6(その他)}}"];

  // edges
  bridges -> bridge_main_contents [label="id=bridge_id 1..n"];
  bridges -> inspections [label="id=bridge_id 1..n"];
  bridges -> bridge_contents [label="id=bridge_id 1..n"];
  bridges -> soundnesses [label="id=bridge_id 1..n"];
  bridge_contents -> bridge_contents_inspections [label="1..n id=bridge_content_id"];
  inspections -> bridge_contents_inspections [label="1..n id=inspection_id"];
  inspections -> bridge_contents [style="dotted", arrowhead="none" label="n..n through bridge_contents_inspections"];
  inspections -> maintenances [label="id=inspection_id 1..1"];
  maintenances -> maintenance_contents [label="id=maintenance_id"];
}